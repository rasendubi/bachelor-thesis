\documentclass[main.tex]{subfiles}

\lstset{%
  breakatwhitespace=true,
  breaklines=true,
  keepspaces=true,
  basicstyle=\footnotesize\ttfamily,
  title=hi \lstname,
}

\begin{document}

\renewcommand\stamppartname{Лістинг коду програми}
\newpart{appendixb}{ІАЛЦ.467100.010 Д7}

\begin{specialpage}
  \MakeUppercase{Додаток Б}\\
  \MakeUppercase{\stampname{}}

  \vspace*{\fill}
  \textbf{\MakeUppercase{\stamppartname{}}}\\
  Аркушів \pageref{\lastpagelabel{}}

  \vspace*{\fill}
  \mypagefooter{}
\end{specialpage}

\begin{singlespacing}

  %\lstinputlisting[
  %  caption=Syntax.hs,
  %]{../silicon/src/Silicon/Syntax.hs}

  \lstinputlisting[
    caption=Lexer.x,
  ]{../silicon/src/Silicon/Lexer.x}

  \lstinputlisting[
    caption=Parser.y,
  ]{../silicon/src/Silicon/Parser.y}

  \lstinputlisting[
    caption=Infer.hs,
  ]{../silicon/src/Silicon/Infer.hs}

  %\lstinputlisting[
  %  caption=Emit.hs,
  %]{../silicon/src/Silicon/Emit.hs}

  % \lstinputlisting[
  %   caption=bscheduler/lib.rs,
  %   firstline=13,
  %   lastline=174,
  % ]{bkernel/bscheduler/lib.rs}

  % %\lstinputlisting[
  % %  caption=stm32f4/volatile.rs,
  % %]{bkernel/stm32f4/volatile.rs}

  % \lstinputlisting[
  %   caption=src/terminal.rs,
  % ]{bkernel/src/terminal.rs}

  % \lstinputlisting[
  %   caption=src/lib.rs,
  % ]{bkernel/src/lib.rs}

\end{singlespacing}

\finalizepart{}

\end{document}
